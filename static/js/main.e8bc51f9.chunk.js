(this["webpackJsonpweb-admin-2"]=this["webpackJsonpweb-admin-2"]||[]).push([[0],{312:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getUser",(function(){return Q})),n.d(a,"login",(function(){return X})),n.d(a,"register",(function(){return $})),n.d(a,"logout",(function(){return ee}));var i={};n.r(i),n.d(i,"listAllJurisdictions",(function(){return ne})),n.d(i,"listAllVolunteers",(function(){return ae})),n.d(i,"assignJurisdictions",(function(){return ie}));var r={};n.r(r),n.d(r,"getJurisdiction",(function(){return ce})),n.d(r,"updateJurisdiction",(function(){return se})),n.d(r,"releaseJurisdiction",(function(){return oe})),n.d(r,"listReleasedJurisdictions",(function(){return le})),n.d(r,"listMyJurisdictions",(function(){return ue})),n.d(r,"getReleasedJurisdiction",(function(){return de})),n.d(r,"publishJurisdiction",(function(){return je}));var c={};n.r(c),n.d(c,"getJurisdictions",(function(){return pe}));var s=n(0),o=n.n(s),l=n(16),u=n.n(l),d=n(18),j=n(30),b=n(373),p=n(374),m=n(8),f=n(10),h=n(381),O=n(377),x=n(354),v=function(e){return e.auth},g=function(e){var t,n,a;return{role:null===(t=e.auth.user)||void 0===t?void 0:t.role,isVolunteer:"volunteer"===(null===(n=e.auth.user)||void 0===n?void 0:n.role),isAdmin:"admin"===(null===(a=e.auth.user)||void 0===a?void 0:a.role)}},y=function(e){return e.wip.wipList},w=function(e){return e.wip.wips},C=function(e){return e.wip.tabs},N=function(e){return e.toaster},S=function(e){return e.assignment},k=function(){return Object(j.c)(v)},I=function(){return Object(j.c)(g)},T=function(){return Object(j.c)(y)},E=function(){return Object(j.c)(w)},A=function(e){return E()[e]},D=function(e){return T().find((function(t){return t.jurisdictionId===+e}))},R=n(43);function B(e){var t=Object(j.b)();return Object(s.useMemo)((function(){return Object(R.bindActionCreators)(e,t)}),[t,e])}var P="toaster/TOAST",J=function(e){return{type:P,data:e}},L=(B.bind(null,{toast:J}),n(1)),W=Object(s.createContext)(),z={message:null,severity:"success",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"center"}},F=Object(x.a)((function(e){return{root:{pointerEvents:"none","& .MuiPaper-root":{pointerEvents:"all"}}}}));function U(e){var t=e.children,n=F(),a=Object(j.b)(),i=Object(s.useState)(!1),r=Object(f.a)(i,2),c=r[0],o=r[1],l=Object(j.c)(N);Object(s.useEffect)((function(){l&&o(!0)}),[l]);var u=Object(s.useCallback)((function(e){a(J(e))}),[a]),d=Object(s.useCallback)((function(e,t){"clickaway"!==t&&o(!1)}),[]),b=Object(s.useMemo)((function(){return Object(m.a)(Object(m.a)({},z),l)}),[l]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(h.a,{classes:n,open:c,onClose:d,anchorOrigin:b.anchorOrigin,autoHideDuration:b.autoHideDuration,children:Object(L.jsx)(O.a,{severity:b.severity,elevation:6,variant:"filled",onClose:d,children:b.message})}),Object(L.jsx)(W.Provider,{value:u,children:t})]})}var M=function(){return Object(s.useContext)(W)},_=n(156),V=n(157),q=n(6),G=n.n(q),H=n(11),Y=n(23),Z=n.n(Y),K="".concat("https://api-dev.ballotnav.org","/admin/user"),Q=function(){var e=Object(H.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.a.get("".concat(K,"/me"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,i={email:n,password:a},e.prev=2,e.next=5,Z.a.post(K+"/login",i);case 5:return r=e.sent,e.next=8,sessionStorage.setItem("token",r.data.token);case 8:return e.abrupt("return",r.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i,r,c,s,o,l;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firstName,a=t.lastName,i=t.email,r=t.password,c=t.notes,s=t.slackName,o={firstName:n,lastName:a,email:i,password:r,notes:c,slackName:s},e.prev=2,e.next=5,Z.a.post(K+"/register",o);case 5:return l=e.sent,e.next=8,sessionStorage.setItem("token",l.data.token);case 8:return e.abrupt("return",l.data);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0.response.data));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(H.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sessionStorage.removeItem("token");case 2:return e.abrupt("return",null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te="".concat("https://api-dev.ballotnav.org","/admin/assignment"),ne=function(){var e=Object(H.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(te,"/jurisdictions"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(H.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(te,"/volunteers"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i,r,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.jurisdictionIds,i=t.removedJurisdictionIds,e.next=3,Z.a.post("".concat(te,"/jurisdictions"),{userId:n,jurisdictionIds:a,removedJurisdictionIds:i});case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re="".concat("https://api-dev.ballotnav.org","/admin/wip/jurisdictions"),ce=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/").concat(t),e.next=3,Z.a.get(n);case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(H.a)(G.a.mark((function e(t,n){var a,i,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.importantDates.forEach((function(e){""===e.beginDate&&(e.beginDate=null),""===e.beginTime&&(e.beginTime=null),""===e.endDate&&(e.endDate=null),""===e.endTime&&(e.endTime=null)})),n.locations.forEach((function(e){"description"!==e.scheduleType&&(e.scheduleDescription=null),"hours"!==e.scheduleType&&(e.hours=[]),"continuous"!==e.scheduleType&&(e.continuousOpenDate=null,e.continuousCloseDate=null,e.continuousOpenTime=null,e.continuousCloseTime=null)})),a="".concat(re,"/").concat(t),e.next=5,Z.a.put(a,n);case 5:return i=e.sent,r=i.data,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/").concat(t,"/release"),e.next=3,Z.a.put(n);case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(H.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(re,"/released"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(H.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(re,"/me"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/released/").concat(t),e.next=3,Z.a.get(n);case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(re,"/").concat(t,"/publish"),e.next=3,Z.a.put(n);case 3:return a=e.sent,i=a.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be="".concat("https://api-dev.ballotnav.org","/admin/dashboard"),pe=function(){var e=Object(H.a)(G.a.mark((function e(){var t,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("".concat(be,"/jurisdictions"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Z.a.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(function(e){Promise.reject(e)})),Z.a.interceptors.response.use((function(e){return e}),(function(e){e.response&&e.response.status;return Promise.reject(e)}));var me={user:a,assignment:i,wip:r,dashboard:c},fe={GET_USER:"auth/GET_USER",LOGIN:"auth/LOGIN",REGISTER:"auth/REGISTER",LOGOUT:"auth/LOGOUT"},he=B.bind(null,{getUser:function(){return function(){var e=Object(H.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.user.getUser();case 2:n=e.sent,t({type:fe.GET_USER,data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},register:function(e){var t=e.firstName,n=e.lastName,a=e.email,i=e.password,r=e.notes,c=e.slackName;return function(){var e=Object(H.a)(G.a.mark((function e(s){var o,l;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.user.register({firstName:t,lastName:n,email:a,password:i,notes:r,slackName:c});case 3:o=e.sent,l=o.user,s({type:fe.REGISTER,data:l}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(J({severity:"error",message:e.t0.duplicateEmail?"email already registered":"unknown error creating account"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},login:function(e){var t=e.email,n=e.password;return function(){var e=Object(H.a)(G.a.mark((function e(a){var i,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.user.login({email:t,password:n});case 3:i=e.sent,r=i.user,a({type:fe.LOGIN,data:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(J({severity:"error",message:e.t0.emailNotFound?"email not found":e.t0.passwordInvalid?"password invalid":"server error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(H.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.user.logout();case 2:t({type:fe.LOGOUT});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Oe={authChecked:!1,user:null},xe=n(19),ve=n(29),ge="wip/LIST_WIPS_SUCCESS",ye="wip/GET_WIP_SUCCESS",we="wip/UPDATE_WIP_SUCCESS",Ce="wip/RELEASE_WIP_SUCCESS",Ne="wip/PUBLISH_WIP_SUCCESS",Se="wip/OPEN_TAB",ke="wip/CLOSE_TAB",Ie=function(){return function(){var e=Object(H.a)(G.a.mark((function e(t,n){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g(n()).isVolunteer){e.next=6;break}return e.next=3,me.wip.listMyJurisdictions();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,me.wip.listReleasedJurisdictions();case 8:e.t0=e.sent;case 9:return a=e.t0,e.abrupt("return",t({type:ge,data:a}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Te=B.bind(null,{listWips:Ie,getWip:function(e){return function(){var t=Object(H.a)(G.a.mark((function t(n,a){var i,r,c,s;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a(),r=g(i),c=r.isVolunteer,t.next=4,Object(H.a)(G.a.mark((function t(){var n,a,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=4;break}return t.next=3,me.wip.getJurisdiction(e);case 3:return t.abrupt("return",t.sent);case 4:return n=y(i),a=n.find((function(t){return t.jurisdictionId===+e})),r=null===a||void 0===a?void 0:a.wipJurisdictionId,t.next=9,me.wip.getReleasedJurisdiction(r);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))();case 4:if(s=t.sent,!c){t.next=8;break}return t.next=8,n(Ie());case 8:n({type:ye,data:s});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},updateWip:function(e){return function(){var t=Object(H.a)(G.a.mark((function t(n){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.wip.updateJurisdiction(e.id,e);case 2:return a=t.sent,t.next=5,n(Ie());case 5:n({type:we,data:a}),n(J({message:"Updated ".concat(e.name,".")}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},releaseWip:function(e){return function(){var t=Object(H.a)(G.a.mark((function t(n){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.wip.releaseJurisdiction(e.id);case 2:return a=t.sent,t.next=5,n(Ie());case 5:n({type:Ce,data:a}),n(J({message:"Released ".concat(e.name)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},publishWip:function(e){return function(){var t=Object(H.a)(G.a.mark((function t(n){var a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.wip.publishJurisdiction(e.id);case 2:return a=t.sent,t.next=5,n(Ie());case 5:n({type:Ne,data:a}),n(J({message:"Published ".concat(e.name)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openTab:function(e){return{type:Se,data:e}},closeTab:function(e){return{type:ke,data:e}}}),Ee={wipList:null,wips:{},tabs:[]},Ae="assignment/GET_JURISDICTIONS_SUCCESS",De="assignment/GET_ASSIGNMENT_SUCCESS",Re=B.bind(null,{getJurisdictions:function(){return function(){var e=Object(H.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.assignment.listAllJurisdictions();case 2:n=e.sent,t({type:Ae,data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getAssignment:function(){return function(){var e=Object(H.a)(G.a.mark((function e(t){var n,a,i,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([me.assignment.listAllJurisdictions(),me.assignment.listAllVolunteers()]);case 2:n=e.sent,a=Object(f.a)(n,2),i=a[0],r=a[1],t({type:De,data:Object(m.a)(Object(m.a)({},i),{},{volunteers:r})});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Be={jurisdictions:null,volunteers:null},Pe="OPEN_MODAL",Je="CLOSE_MODAL",Le={map:{isOpen:!1,params:{}},map2:{isOpen:!1,params:{}}},We=B.bind(null,{openModal:function(e,t){return{type:Pe,data:{modalId:e,params:t}}},closeModal:function(e){return{type:Je,data:{modalId:e}}}}),ze="dashboard/GET_JURISDICTIONS_SUCCESS",Fe=(B.bind(null,{getJurisdictions:function(){return function(){var e=Object(H.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.dashboard.getJurisdictions();case 2:(n=e.sent).forEach((function(e){return e.geojson=JSON.parse(e.geojson)})),t({type:ze,data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),{jurisdictions:null}),Ue=Object(R.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe.SUBMIT:return Object(m.a)(Object(m.a)({},e),{},{isSubmitting:!0});case fe.CLEAR_SUBMIT:return Object(m.a)(Object(m.a)({},e),{},{isSubmitting:!1});case fe.GET_USER:return Object(m.a)(Object(m.a)({},e),{},{authChecked:!0,isSubmitting:!1,user:t.data});case fe.LOGIN:case fe.REGISTER:return Object(m.a)(Object(m.a)({},e),{},{user:t.data,isSubmitting:!1});case fe.LOGOUT:return Object(m.a)(Object(m.a)({},e),{},{user:null});default:return e}},wip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(m.a)(Object(m.a)({},e),{},{wipList:t.data});case ye:case we:case Ce:case Ne:return Object(m.a)(Object(m.a)({},e),{},{wips:Object(m.a)(Object(m.a)({},e.wips),{},Object(ve.a)({},t.data.jurisdictionId,t.data))});case Se:return Object(m.a)(Object(m.a)({},e),{},{tabs:[].concat(Object(xe.a)(e.tabs),[t.data])});case ke:return Object(m.a)(Object(m.a)({},e),{},{tabs:e.tabs.filter((function(e){return e!==t.data}))});default:return e}},assignment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:return Object(m.a)(Object(m.a)({},e),{},{jurisdictions:t.data});case De:return t.data;default:return e}},toaster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.data;default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(m.a)(Object(m.a)({},e),{},Object(ve.a)({},t.data.modalId,{isOpen:!0,params:t.data.params}));case Je:return Object(m.a)(Object(m.a)({},e),{},Object(ve.a)({},t.data.modalId,{isOpen:!1,params:{}}));default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:return Object(m.a)(Object(m.a)({},e),{},{jurisdictions:t.data});default:return e}}}),Me=Object(R.createStore)((function(e,t){return t.type===fe.LOGOUT&&(e=void 0),Ue(e,t)}),Object(V.composeWithDevTools)(Object(R.applyMiddleware)(_.a))),_e=n(171),Ve=Object(_e.a)({palette:{type:"light",primary:{main:"#1B2152",dark:"#040822",light:"#EBF3FA"},secondary:{main:"#FF0029"},link:{main:"#0819A5"},background:{default:"#FFF"},divider:"#CCD3DD",locationMarkers:{default:"#614799",selected:"#FF0029"},jurisdictionStatuses:{"Awaiting Edit":{text:"#FFFFFF",background:"green"},"Edit in Progress":{text:"#041B54",background:"#FFD644"},"Released for Review":{text:"#FFFFFF",background:"#53A8E2"},Published:{text:"#FFFFFF",background:"#FF7144"}}},typography:{fontFamily:["Open Sans","sans-serif"]},breakpoints:{values:{mobile:0,desktop:960}},layout:{pageWidth:1134},overrides:{MuiCssBaseline:{"@global":{a:{textDecoration:"none"},"h1, h2, h3, h4, h5, h6, p":{margin:0,padding:0}}}}}),qe=n(22),Ge=n(12),He=n(51),Ye=n(170),Ze=n(378),Ke=n(361),Qe=Object(x.a)((function(e){return{root:{"& > .changed:after":{content:'"*"',position:"absolute",top:0,right:-10,color:e.palette.primary.main},"& .MuiInputLabel-shrink":{fontWeight:600,color:"#808080"}}}})),Xe=function(e){var t=e.select,n=e.options,a=Object(He.a)(e,["select","options"]),i=Qe();return Object(L.jsx)("div",{className:i.root,children:Object(L.jsx)(Ze.a,Object(m.a)(Object(m.a)({select:t},a),{},{children:t&&n.map((function(e){return Object(L.jsx)(Ke.a,{dense:!0,value:e.value,children:e.label},e.value)}))}))})},$e=n(362),et=n(4),tt=n(363),nt=Object(x.a)((function(e){return{common:{textTransform:"none",fontWeight:700,position:"relative"},small:{fontSize:12,borderRadius:"1.25em",padding:"0.25em 1em"},medium:{fontSize:12,borderRadius:"1.5em",padding:"0.25em 3em"},large:{fontSize:14,borderRadius:"1.5em",padding:"0.75em 3em"},xLarge:{fontSize:14,borderRadius:"2em",padding:"1em 3em",textTransform:"uppercase"},label:{visibility:function(e){return e.isLoading?"hidden":"visible"},cursor:"pointer"},loader:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}}})),at=function(e){var t=e.label,n=void 0===t?"add a label prop":t,a=e.size,i=void 0===a?"medium":a,r=e.disabled,c=e.isLoading,s=e.className,o=Object(He.a)(e,["label","size","disabled","isLoading","className"]),l=nt({isLoading:c});return Object(L.jsxs)($e.a,Object(m.a)(Object(m.a)({color:"primary",variant:"contained",className:Object(et.a)(l.common,l[i],s),disabled:r||c},o),{},{children:[Object(L.jsx)("label",{className:l.label,children:n}),c&&Object(L.jsx)("div",{className:l.loader,children:Object(L.jsx)(tt.a,{color:"primary",size:"1.5em"})})]}))},it=n(97),rt=n.n(it);function ct(e){var t=e.schema,n=e.initialValues,a=void 0===n?{}:n,i=e.onSubmit,r=e.inputDefaults,c=void 0===r?{}:r,o=e.buttonDefaults,l=void 0===o?{}:o,u=e.trackChanges,d=void 0!==u&&u,j=Object(s.useMemo)((function(){return function(e,t){var n={};return Object.keys(t).forEach((function(a){n[a]=e[a]||t[a].defaultValue||""})),n}(a,t)}),[a,t]),b=Object(s.useCallback)((function(e){return i(function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n]||null})),t}(e))}),[i]),p=Object(s.useMemo)((function(){return function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].validate})),Ge.a(t)}(t)}),[t]),f=Object(Ye.a)({initialValues:j,onSubmit:b,validationSchema:p,enableReinitialize:!0,validateOnChange:!1});return f.changed=Object(s.useMemo)((function(){return function(e,t){var n={};return Object.keys(e).forEach((function(a){n[a]=e[a]!==t[a]})),n}(j,f.values)}),[j,f.values]),f.makeInput=Object(s.useCallback)((function(e){var n,a=f.values,i=f.touched,r=f.errors,s=f.changed,o=f.handleChange,l=t[e].input.type;return Object(L.jsx)(Xe,Object(m.a)(Object(m.a)({margin:"dense",fullWidth:!0,name:e,label:e,value:"date"===l?(n=a[e],n?rt()(n).utc().format("yyyy-MM-DD"):""):a[e]||"",onChange:o,helperText:i[e]?r[e]:null,error:!!r[e]&&i[e],className:d&&s[e]?"changed":void 0,InputLabelProps:"date"===l||"time"===l?{shrink:!0}:void 0},c),t[e].input))}),[t,f,c,d]),f.makeSubmitButton=Object(s.useCallback)((function(e){var t=e.requireDirty,n=Object(He.a)(e,["requireDirty"]);return Object(L.jsx)(at,Object(m.a)(Object(m.a)({onClick:f.handleSubmit,isLoading:f.isSubmitting,disabled:t&&!f.dirty,label:"Submit"},l),n))}),[f,l]),f.makeResetButton=Object(s.useCallback)((function(e){return Object(L.jsx)(at,Object(m.a)(Object(m.a)({disabled:!f.dirty||f.isSubmitting,onClick:f.handleReset,label:"Clear changes",variant:"outlined"},l),e))}),[f,l]),f}var st=Object(x.a)((function(e){return{root:{padding:100,maxWidth:600,margin:"0 auto",textAlign:"center","& button":{margin:"2.5em 0 1.25em"},"& a":{color:e.palette.primary.main}},title:{marginBottom:20,color:e.palette.primary.main,fontWeight:600}}})),ot=function(e){var t=e.title,n=e.children,a=st();return Object(L.jsxs)("div",{className:a.root,children:[Object(L.jsx)("h1",{className:a.title,children:t}),n]})},lt={email:{validate:Ge.c().email().required("Required"),input:{label:"Email",autoFocus:!0}},password:{validate:Ge.c().min(8).required("Required"),input:{label:"Password",type:"password"}}},ut=function(){var e=he().login,t=ct({schema:lt,onSubmit:e,inputDefaults:{variant:"outlined",margin:"normal"}}),n=t.makeInput,a=t.makeSubmitButton;return Object(L.jsxs)(ot,{title:"Login",children:[Object(L.jsxs)("form",{children:[n("email"),n("password"),a({label:"Log In",type:"submit",fullWidth:!0,size:"large"})]}),Object(L.jsx)(d.b,{to:"/register",children:"Need an account? Register here."})]})},dt=n(364),jt={firstName:{validate:Ge.c().required("Required"),input:{label:"First Name"}},lastName:{validate:Ge.c().required("Required"),input:{label:"Last Name"}},email:{validate:Ge.c().email().required("Required"),input:{label:"Email"}},password:{validate:Ge.c().min(8).required("Required"),input:{label:"Password",type:"password"}},passwordConfirm:{validate:Ge.c().required("Required").oneOf([Ge.b("password"),null],"Passwords must match"),input:{label:"Re-type Password",type:"password"}},notes:{validate:Ge.c(),input:{label:"Region / Time Zone Preference"}},slackName:{validate:Ge.c(),input:{label:"Slack Name"}}},bt=function(){var e=he().register,t=ct({schema:jt,onSubmit:e,inputDefaults:{variant:"outlined",margin:"normal"}}),n=t.makeInput,a=t.makeSubmitButton;return Object(L.jsxs)(ot,{title:"Register",children:[Object(L.jsxs)("form",{children:[Object(L.jsxs)(dt.a,{container:!0,spacing:2,children:[Object(L.jsx)(dt.a,{item:!0,xs:6,children:n("firstName")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:n("lastName")})]}),n("email"),n("password"),n("passwordConfirm"),n("notes"),n("slackName"),a({label:"Register",type:"submit",fullWidth:!0,size:"large"})]}),Object(L.jsx)(d.b,{to:"/login",children:"Already have an account? Login here."})]})},pt=Object(x.a)((function(e){return{pageWidth:{width:e.layout.pageWidth,maxWidth:"calc(100vw - 8em)"}}})),mt=function(e){var t=e.className,n=e.style,a=e.children,i=pt();return Object(L.jsx)("div",{style:n,className:Object(et.a)(i.pageWidth,t),children:a})},ft=n.p+"static/media/ballotnav.77a43536.svg",ht=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center"},name:{fontWeight:700},divider:{margin:"0 1em"},logout:{fontWeight:600,cursor:"pointer","&:hover":{textDecoration:"underline"}}}})),Ot=function(){var e=ht(),t=k().user,n=he().logout;return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsxs)("div",{className:e.name,children:[t.firstName," ",t.lastName]}),Object(L.jsx)("div",{className:e.divider,children:"|"}),Object(L.jsx)("div",{className:e.logout,onClick:n,children:"Logout"})]})},xt=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center"},divider:{margin:"0 1em"},link:{color:e.palette.common.white,textDecoration:"underline",cursor:"pointer",fontWeight:600},active:{textDecoration:"none",cursor:"default"}}})),vt=function(){var e=xt();return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(d.c,{className:e.link,activeClassName:e.active,to:"/login",children:"Login"}),Object(L.jsx)("div",{className:e.divider,children:"|"}),Object(L.jsx)(d.c,{className:e.link,activeClassName:e.active,to:"/register",children:"Register"})]})},gt=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1em 0"},logo:{height:30,display:"block"}}})),yt=function(e){var t=e.isAuth,n=gt();return Object(L.jsxs)("div",{className:n.root,children:[Object(L.jsx)(d.b,{to:"/",children:Object(L.jsx)("img",{src:ft,alt:"Ballotnav logo",className:n.logo})}),t?Object(L.jsx)(vt,{}):Object(L.jsx)(Ot,{})]})},wt=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"flex-start",userSelect:"none"},tab:{fontSize:20,fontWeight:700,marginRight:"2em",color:e.palette.common.white,position:"relative",whiteSpace:"nowrap"},selected:{cursor:"default","&:after":{content:'""',position:"absolute",bottom:-2,height:4,left:0,right:0,backgroundColor:e.palette.secondary.main}}}})),Ct=function(e){var t=e.tabs,n=wt(),a=Object(qe.h)();return Object(L.jsx)("div",{className:n.root,children:t.map((function(e){return Object(L.jsx)(d.b,{to:e.pathname,className:Object(et.a)(n.tab,Object(ve.a)({},n.selected,e.pathname===a.pathname)),children:e.title},e.pathname)}))})},Nt=n(163),St=n.n(Nt),kt=Object(x.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start",userSelect:"none",minWidth:0},tab:{color:e.palette.primary.main,fontSize:"1em",fontWeight:700,backgroundColor:e.palette.common.white,borderTopLeftRadius:"0.75em",borderTopRightRadius:"0.75em",padding:"0.125em 0.5em",opacity:.5,display:"flex",alignItems:"center",marginRight:2,minWidth:0,"& > a":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",color:"inherit",minWidth:0}},closeButton:{marginLeft:"1em",cursor:"pointer",fontSize:"1.25em"},selected:{opacity:1,"& > a":{cursor:"default"}}}})),It=function(){var e=kt(),t=Object(qe.g)(),n=E(),a=Object(j.c)(C),i=Te(),r=i.openTab,c=i.closeTab,o=Object(qe.i)("/jurisdictions/:jid"),l=+(null===o||void 0===o?void 0:o.params.jid);Object(s.useEffect)((function(){l&&!a.includes(l)&&r(l)}),[r,l,a]);var u=Object(s.useMemo)((function(){return n?a.map((function(e){var t=n[e];return t?{jid:e,title:t.name}:null})).filter((function(e){return!!e})):[]}),[a,n]),b=Object(s.useCallback)((function(e,n){c(e),n&&t.push("/jurisdictions")}),[c,t]);return Object(L.jsx)("div",{className:e.root,children:u.map((function(t){var n=t.jid===l,a=Object(et.a)(e.tab,Object(ve.a)({},e.selected,n)),i=b.bind(null,t.jid,n);return Object(L.jsxs)("div",{className:a,children:[Object(L.jsx)(d.b,{to:"/jurisdictions/".concat(t.jid),children:t.title}),Object(L.jsx)(St.a,{className:e.closeButton,onClick:i})]},t.jid)}))})},Tt=[{title:"My Jurisdictions",pathname:"/jurisdictions"}],Et=[{title:"Dashboard",pathname:"/dashboard"},{title:"Assign",pathname:"/assign"},{title:"Review",pathname:"/jurisdictions"}],At=Object(x.a)((function(e){return{root:{display:"flex",justifyContent:"flex-start"}}})),Dt=function(){var e=At(),t=I().isAdmin?Et:Tt;return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(Ct,{tabs:t}),Object(L.jsx)(It,{})]})},Rt=Object(x.a)((function(e){return{root:{color:e.palette.common.white,backgroundColor:"#041B54",userSelect:"none",display:"flex",justifyContent:"center",width:"100%",height:function(e){return e.isAuth?"auto":150}},inner:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"}}})),Bt=function(){var e=!k().user,t=Rt({isAuth:e});return Object(L.jsx)("div",{className:t.root,children:Object(L.jsxs)(mt,{className:t.inner,children:[Object(L.jsx)(yt,{isAuth:e}),!e&&Object(L.jsx)(Dt,{})]})})},Pt=Object(x.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh",alignItems:"center"},inner:{padding:"1.5em 0"}}})),Jt=function(e){var t=e.children,n=Pt();return Object(L.jsxs)("div",{className:n.root,children:[Object(L.jsx)(Bt,{}),Object(L.jsx)(mt,{className:n.inner,children:t})]})},Lt=function(){return Object(L.jsx)(Jt,{children:Object(L.jsxs)(qe.d,{children:[Object(L.jsx)(qe.b,{exact:!0,path:"/login",component:ut}),Object(L.jsx)(qe.b,{exact:!0,path:"/register",component:bt}),Object(L.jsx)(qe.a,{to:"/login"})]})})},Wt=n(164),zt=n.n(Wt),Ft=n(314),Ut=Object(x.a)((function(e){return{root:{display:"flex",alignItems:"center",color:"#949494",fontWeight:400,fontSize:12},lastUpdated:{fontWeight:700,display:"inline-block",margin:"0 0.5em"}}})),Mt=function(e){var t=e.updatedAt,n=e.onUpdate,a=Ut();return Object(L.jsxs)("div",{className:a.root,children:[Object(L.jsx)("span",{children:"Last update:"}),Object(L.jsx)("span",{className:a.lastUpdated,children:rt()(t).format("ddd MMM Do, YYYY")}),Object(L.jsx)(Ft.a,{size:"small",onClick:n,children:Object(L.jsx)(zt.a,{color:"primary",style:{fontSize:28}})})]})},_t=n(165),Vt=n.n(_t),qt=Object(x.a)((function(e){return{root:{display:"flex"},input:{flex:1,color:e.palette.primary.main,fontSize:"1em",border:"none",outline:"none"}}})),Gt=function(e){var t=e.value,n=e.onChange,a=e.placeholder,i=qt(),r=Object(s.useCallback)((function(e){n(e.target.value)}),[n]);return Object(L.jsxs)("div",{className:i.root,children:[Object(L.jsx)("input",{className:i.input,value:t,onChange:r,placeholder:a}),Object(L.jsx)(Vt.a,{color:"primary",style:{fontSize:28}})]})},Ht=Object(x.a)((function(e){var t=e.palette.jurisdictionStatuses;return{root:{color:function(e){var n,a=e.status;return null===(n=t[a])||void 0===n?void 0:n.text},backgroundColor:function(e){var n,a=e.status;return null===(n=t[a])||void 0===n?void 0:n.background},padding:"2px 1em 1px",borderRadius:"1em",textTransform:"uppercase",fontSize:12,display:"inline-block"}}})),Yt=function(e){var t=e.status,n=Ht({status:t});return Object(L.jsx)("div",{className:n.root,children:t})},Zt=function(e){var t=e.direction;return Object(L.jsx)("div",{style:{height:"1.4em",width:"1.4em"},children:Object(L.jsxs)("svg",{viewBox:"0 0 24 24",children:[Object(L.jsx)("polygon",{fillOpacity:"asc"===t?1:.3,points:"7,10 17,10, 12,5"}),Object(L.jsx)("polygon",{fillOpacity:"desc"===t?1:.3,points:"7,14 17,14, 12,19"})]})})},Kt=function(e){var t=e.columns,n=e.onClick,a=e.sortCol,i=e.sortDirection;return Object(L.jsx)("tr",{children:t.map((function(e,t){var r=e.sort,c=e.title,s=e.textAlign,o=a===t,l=r&&n.bind(null,t);return Object(L.jsx)("th",{onClick:l,style:{cursor:r?"pointer":"default",backgroundColor:o?"#CDE4F7":void 0,textAlign:s},children:Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{children:c}),r&&Object(L.jsx)(Zt,{direction:o?i:void 0})]})},t.toString())}))})},Qt=n(167),Xt=n.n(Qt),$t=n(166),en=n.n($t),tn=Object(x.a)((function(e){return{button:{position:"absolute",left:"calc(100% + 0.25em)",top:"50%",transform:"translateY(-50%)",cursor:"pointer",display:"flex",alignItems:"center"},icon:{fontSize:28}}})),nn=function(e){var t=e.onClick,n=e.isUncollapsed,a=tn();return Object(L.jsx)(Ft.a,{onClick:t,size:"small",className:a.button,children:n?Object(L.jsx)(en.a,{color:"primary",className:a.icon}):Object(L.jsx)(Xt.a,{color:"primary",className:a.icon})})},an=function(e){var t=e.data,n=e.columns,a=e.keyExtractor,i=e.collapse,r=Object(s.useState)([]),c=Object(f.a)(r,2),o=c[0],l=c[1],u=Object(s.useCallback)((function(e){l((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Object(xe.a)(t),[e])}))}),[]);return t.map((function(e){var t=a(e),r=o.includes(t);return Object(L.jsxs)(s.Fragment,{children:[Object(L.jsx)("tr",{children:n.map((function(a,i){var c=a.field,s=a.render,o=a.textAlign,l=i===n.length-1;return Object(L.jsxs)("td",{style:{textAlign:o,position:l?"relative":void 0},children:[s?s(e[c],e):e[c],l&&Object(L.jsx)(nn,{isUncollapsed:r,onClick:u.bind(null,t)})]},i.toString())}))}),r&&Object(L.jsx)("tr",{children:Object(L.jsx)("td",{colSpan:n.length,style:{maxWidth:0,padding:0,overflowY:"auto"},children:i(e)})})]},t)}))},rn=function(e){var t=e.data,n=e.columns,a=e.keyExtractor,i=e.collapse;return i?Object(L.jsx)(an,{data:t,columns:n,keyExtractor:a,collapse:i}):t.map((function(e){return Object(L.jsx)("tr",{children:n.map((function(t,n){var a=t.field,i=t.render,r=t.textAlign;return Object(L.jsx)("td",{style:{textAlign:r},children:i?i(e[a],e):e[a]},n.toString())}))},a(e))}))},cn=n(376),sn=n(365),on=Object(x.a)((function(e){return{root:{padding:"0 0.5em",display:"flex",alignItems:"center",justifyContent:"space-between",userSelect:"none",backgroundColor:"#EBF3FA"},density:{display:"flex",alignItems:"center"},pager:{display:"flex",alignItems:"center"}}})),ln=[5,10,25,{value:-1,label:"All"}],un=function(e){var t=e.rowCount,n=e.pageIndex,a=e.onChangePageIndex,i=e.rowsPerPage,r=e.onChangeRowsPerPage,c=e.dense,o=e.onChangeDense,l=on(),u=Object(s.useCallback)((function(e,t){o(t)}),[o]),d=Object(s.useCallback)((function(e,t){a(t)}),[a]),j=Object(s.useCallback)((function(e){r(+e.target.value)}),[r]),b=Object(s.useCallback)((function(e){var t=e.from,n=e.to,a=e.count;return-1===n?"".concat(a," of ").concat(a):"".concat(t,"-").concat(n," of ").concat(a)}),[]),p=n>Math.floor(t/i)?0:n;return Object(L.jsxs)("div",{className:l.root,children:[Object(L.jsxs)("div",{className:l.density,children:[Object(L.jsx)(sn.a,{checked:c,onChange:u,color:"primary"}),Object(L.jsx)("div",{children:"Dense"})]}),Object(L.jsx)("div",{className:l.pager,children:Object(L.jsx)(cn.a,{component:"div",count:t,page:p,onChangePage:d,rowsPerPage:i,rowsPerPageOptions:ln,onChangeRowsPerPage:j,labelDisplayedRows:b,SelectProps:{native:!0}})})]})},dn=Object(x.a)((function(e){return{table:{borderCollapse:"collapse",width:"100%",color:e.palette.primary.main,userSelect:"none",tableLayout:"fixed","& th":{backgroundColor:"#EBF3FA","& > div":{display:"flex",alignItems:"center"}},"& th, & td":{textAlign:"left",padding:function(e){return e.dense?"0 0.75em":"0 1.25em"},height:function(e){return e.dense?40:60}},"& tbody tr:not(:last-child)":{borderBottom:"1px #C3C8E4 solid"}}}})),jn=function(e){var t=e.data,n=e.columns,a=e.keyExtractor,i=void 0===a?function(e){return e.id}:a,r=e.collapse,c=Object(s.useState)(!1),o=Object(f.a)(c,2),l=o[0],u=o[1],d=dn({dense:l}),j=Object(s.useState)(-1),b=Object(f.a)(j,2),p=b[0],m=b[1],h=Object(s.useState)("desc"),O=Object(f.a)(h,2),x=O[0],v=O[1],g=Object(s.useState)(0),y=Object(f.a)(g,2),w=y[0],C=y[1],N=Object(s.useState)(t.length<5?-1:5),S=Object(f.a)(N,2),k=S[0],I=S[1];Object(s.useEffect)((function(){m(n.findIndex((function(e){return e.sort}))),v("desc")}),[n]),Object(s.useEffect)((function(){C(0)}),[t]);var T=Object(s.useMemo)((function(){if(!t)return null;if(!n[p])return t;var e=n[p],a=e.sort,i=e.field,r=!0===a&&i?function(e,t){return t[i]>e[i]?1:-1}:function(e,t){return a(e[i],t[i])},c=Object(xe.a)(t).sort(r);return"desc"===x&&c.reverse(),c}),[t,n,p,x]),E=Object(s.useMemo)((function(){if(!T)return null;if(-1===k)return T;var e=w*k,t=e+k;return T.slice(e,t)}),[T,w,k]),A=Object(s.useCallback)((function(e){e!==p?(m(e),v("desc")):v((function(e){return"asc"===e?"desc":"asc"}))}),[p]);if(!E)return null;var D=k-E.length;return 0===E.length&&(D-=1),Object(L.jsxs)("div",{children:[Object(L.jsxs)("table",{className:d.table,children:[Object(L.jsx)("thead",{children:Object(L.jsx)(Kt,{columns:n,onClick:A,sortCol:p,sortDirection:x})}),Object(L.jsxs)("tbody",{children:[Object(L.jsx)(rn,{data:E,columns:n,keyExtractor:i,collapse:r}),0===E.length&&Object(L.jsx)("tr",{children:Object(L.jsx)("td",{colSpan:n.length,children:Object(L.jsx)("i",{children:"No data."})})}),D>0&&Object(L.jsx)("tr",{style:{height:(l?40:60)*D},children:Object(L.jsx)("td",{colSpan:n.length})})]})]}),Object(L.jsx)(un,{rowCount:t.length,pageIndex:w,onChangePageIndex:C,rowsPerPage:k,onChangeRowsPerPage:I,dense:l,onChangeDense:u})]})},bn=function(e){var t=e.to,n=e.disabled,a=Object(He.a)(e,["to","disabled"]),i=Object(qe.i)().url;return Object(L.jsx)(d.b,{to:"".concat(i,"/").concat(t),style:{cursor:n?"default":"pointer"},children:Object(L.jsx)(at,Object(m.a)({disabled:n},a))})};var pn=[{title:"Jurisdiction",field:"jurisdictionName",sort:!0},{title:"State",field:"stateName",sort:!0},{title:"Status",field:"jurisdictionStatus",render:function(e){return Object(L.jsx)(Yt,{status:e})},sort:function(e,t){var n=function(e){return["Awaiting Edit","Edit in Progress","Released for Review","Published"].indexOf(e)};return n(t)-n(e)}},{render:function(e,t){var n=t.jurisdictionId;return Object(L.jsx)(bn,{to:n,label:"Select"})},textAlign:"center"}],mn=[{title:"Volunteer",field:"editorName",sort:!0},{title:"Slack",field:"editorSlackName",sort:!0}],fn=function(e){var t=e.wips,n=I().isAdmin,a=[].concat(pn);return n&&a.splice.apply(a,[2,0].concat(mn)),Object(L.jsx)(jn,{data:t,columns:a,keyExtractor:function(e){return e.jurisdictionId}})},hn=Object(x.a)((function(e){return{root:{paddingBottom:"6em"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2.5em",height:"3em"},title:{color:e.palette.secondary.main,fontWeight:700,fontSize:24},searchBox:{borderBottom:"1px #d6d6d6 solid",marginBottom:"0.5em"}}})),On=function(){var e=hn(),t=Object(s.useState)(""),n=Object(f.a)(t,2),a=n[0],i=n[1],r=T(),c=Te().listWips,o=I().isVolunteer,l=Object(s.useMemo)((function(){var e=a.trim();return e.length<2?r:r.filter((function(t){var n=new RegExp(e,"i");return n.test(t.jurisdictionName)||n.test(t.stateName)}))}),[a,r]);return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsxs)("div",{className:e.header,children:[Object(L.jsx)("h1",{className:e.title,children:o?"My Jurisdictions":"Review Jurisdictions"}),Object(L.jsx)(Mt,{updatedAt:Date.now(),onUpdate:c})]}),Object(L.jsx)("div",{className:e.searchBox,children:Object(L.jsx)(Gt,{value:a,onChange:i,placeholder:"Filter by jurisdiction or state name"})}),Object(L.jsx)(fn,{wips:l})]})},xn={name:{validate:Ge.c().required(),input:{label:"Name"}},authorityName:{validate:Ge.c(),input:{label:"Authority Name"}},mailAddress1:{validate:Ge.c(),input:{label:"Address 1"}},mailAddress2:{validate:Ge.c(),input:{label:"Address 2"}},mailAddress3:{validate:Ge.c(),input:{label:"Address 3"}},internalNotes:{validate:Ge.c(),input:{label:"Internal Notes",type:"textarea",multiline:!0,rows:7}}},vn=function(e){var t=e.wipJurisdiction,n=e.onSubmit,a=ct({schema:xn,initialValues:t,onSubmit:n,inputDefaults:{variant:"outlined"}}),i=a.makeInput,r=a.makeSubmitButton,c=a.makeResetButton;return Object(L.jsx)("form",{children:Object(L.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(L.jsx)(dt.a,{item:!0,xs:6,children:i("name")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:i("authorityName")}),Object(L.jsxs)(dt.a,{container:!0,item:!0,xs:6,spacing:0,children:[Object(L.jsx)(dt.a,{item:!0,xs:12,children:i("mailAddress1")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:i("mailAddress2")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:i("mailAddress3")})]}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:i("internalNotes")}),Object(L.jsx)(dt.a,{item:!0,xs:6}),Object(L.jsxs)(dt.a,{container:!0,item:!0,xs:6,justify:"space-around",children:[c(),r({label:"Update jurisdiction",requireDirty:!0})]})]})})},gn=function(e){return e},yn=Object(x.a)((function(e){return{root:{display:"flex",userSelect:"none"},tab:{paddingRight:"2em",cursor:"pointer"},activeTab:{position:"relative",cursor:"default","&:after":{content:'""',position:"absolute",bottom:-1,left:0,right:0,height:1,backgroundColor:e.palette.primary.main}},title:{fontSize:20,color:e.palette.primary.main,opacity:.3,whiteSpace:"nowrap"},activeTitle:{opacity:1}}})),wn=function(e){var t=e.tabs,n=e.activeTab,a=e.onChange,i=e.renderTitle,r=void 0===i?gn:i,c=yn();return Object(L.jsx)("div",{className:c.root,children:t.map((function(e,t){var i=e===n;return Object(L.jsx)("div",{className:Object(et.a)(c.tab,Object(ve.a)({},c.activeTab,i)),onClick:i?void 0:a.bind(null,e),children:Object(L.jsx)("div",{className:Object(et.a)(c.title,Object(ve.a)({},c.activeTitle,i)),children:r(e)})},t)}))})},Cn=n(168),Nn=n.n(Cn),Sn=function(e){var t=e.to,n=Object(qe.i)().url;return Object(L.jsx)(d.b,{to:"".concat(n,"/").concat(t),children:Object(L.jsx)(Nn.a,{color:"primary",style:{fontSize:32,display:"block"}})})},kn=n(169),In=n.n(kn),Tn=[{title:"Type",field:"facilityTypeId"},{title:"Address1",field:"address1"},{title:"Address2",field:"address2"},{title:"Address3",field:"address3"},{title:"City",field:"city"},{title:"Zip",field:"zip"},{title:"Time Zone",field:"timezone"},{title:"Rules",field:"rules"},{title:"Name",field:"contactName"},{title:"Phone",field:"contactPhone"},{title:"Email",field:"contactEmail"}],En=Object(x.a)((function(e){return{root:{display:"flex"},column:{flex:1,borderRight:"1px #C3C8E4 solid","&:first-child":{borderLeft:"1px #C3C8E4 solid"}},title:{padding:"1em 0.5em",backgroundColor:"#E5E7F3",fontWeight:700,textAlign:"center",whiteSpace:"nowrap"},check:{padding:"1em",display:"flex",alignItems:"center",justifyContent:"center"},isChecked:{backgroundColor:"#07917A",border:"2px #07917A solid"},notChecked:{border:"2px ".concat(e.palette.secondary.main," solid"),"& .MuiSvgIcon-root":{visiblity:"hidden"}},icon:{fontSize:12,display:"block",color:e.palette.common.white}}})),An=function(e){var t=e.location,n=En();return Object(L.jsx)("div",{className:n.root,children:Tn.map((function(e,a){var i=e.title,r=e.field;return Object(L.jsxs)("div",{className:n.column,children:[Object(L.jsx)("div",{className:n.title,children:i}),Object(L.jsx)("div",{className:n.check,children:Object(L.jsx)("div",{className:t[r]?n.isChecked:n.notChecked,children:Object(L.jsx)(In.a,{className:n.icon})})})]},a.toString())}))})},Dn={1:"Voice",2:"TTY",3:"Fax"},Rn={1:"Voter Registration Deadline",2:"Absentee Ballot Application Deadline",3:"Polls Open",4:"Absentee Ballot Return Deadline"},Bn=function(e){var t=e.to;return Object(L.jsx)(bn,{to:t,label:"Edit",variant:"outlined"})},Pn=[{title:"Locations",field:"locations",columns:[{title:"Location name",field:"name",sort:!0},{title:"City",field:"city",sort:!0},{title:"Contact name",field:"contactName",sort:!0},{title:"Contact phone",field:"contactPhone"},{title:"Contact email",field:"contactEmail"},{render:function(e,t){var n=t.id;return Object(L.jsx)(Bn,{to:"locations/".concat(n)})},textAlign:"center"}],collapse:function(e){return Object(L.jsx)(An,{location:e})}},{title:"Phones",field:"phones",columns:[{title:"Phone Number Type",field:"phoneNumberTypeId",render:function(e){return Dn[e]},sort:!0},{title:"Phone Number",field:"phoneNumber"},{title:"Description",field:"description"},{title:"Sort Order",field:"sortOrder"},{render:function(e,t){var n=t.id;return Object(L.jsx)(Bn,{to:"phones/".concat(n)})},textAlign:"center"}]},{title:"Important Dates",field:"importantDates",columns:[{title:"Important Date Type",field:"importantDateTypeId",render:function(e){return Rn[e]},sort:!0},{title:"Note",field:"note"},{render:function(e,t){var n=t.id;return Object(L.jsx)(Bn,{to:"importantDates/".concat(n)})},textAlign:"center"}]}],Jn=Object(x.a)((function(e){return{root:{},header:{marginBottom:"0.5em",borderBottom:"1px #D6D6D6 solid",display:"flex",alignItems:"flex-end",justifyContent:"space-between"}}})),Ln=function(e){var t=e.wipJurisdiction,n=Jn(),a=Object(s.useState)(Pn[0]),i=Object(f.a)(a,2),r=i[0],c=i[1];return Object(L.jsxs)("div",{className:n.root,children:[Object(L.jsxs)("div",{className:n.header,children:[Object(L.jsx)(wn,{tabs:Pn,activeTab:r,onChange:c,renderTitle:function(e){return e.title}}),Object(L.jsx)(Sn,{to:"".concat(r.field,"/new")})]}),Object(L.jsx)(jn,{data:t[r.field],columns:r.columns,collapse:r.collapse})]})},Wn=Object(x.a)((function(e){return{root:{position:"fixed",left:0,right:0,bottom:0,backgroundColor:"#EBF3FA",display:"flex",justifyContent:"center"},inner:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"1em 0"}}})),zn=function(e){var t=e.wipJurisdiction,n=Wn(),a=Te(),i=a.releaseWip,r=a.publishWip,c=a.closeTab,o=I().isVolunteer,l=Object(qe.g)(),u=Object(s.useState)(!1),d=Object(f.a)(u,2),j=d[0],b=d[1],p=Object(s.useCallback)(Object(H.a)(G.a.mark((function e(){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),n=o?i:r,e.next=4,n(t);case 4:b(!1),l.push("/jurisdictions"),c(t.jurisdictionId);case 7:case"end":return e.stop()}}),e)}))),[o,r,i,t,l,c]);return Object(L.jsx)("div",{className:n.root,children:Object(L.jsx)(mt,{className:n.inner,children:Object(L.jsx)(at,{label:o?"Submit For Review":"Publish",size:"xLarge",onClick:p,disabled:o&&t.isReleased,isLoading:j})})})},Fn=Object(x.a)((function(e){return{root:{paddingBottom:"6em"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"3em"},headerLeft:{flex:1,display:"flex",alignItems:"center"},title:{color:e.palette.secondary.main,fontWeight:700,marginRight:"1.5em"},detailsToggle:{display:"inline-block",color:e.palette.link.main,textDecoration:"underline",fontSize:"0.875em",marginBottom:"1.5em",cursor:"pointer",userSelect:"none"},details:{display:function(e){return e.showDetails?"block":"none"},marginBottom:"3em"}}})),Un=function(e){var t,n=e.match.params.jid,a=Object(s.useState)(!0),i=Object(f.a)(a,2),r=i[0],c=i[1],o=Fn({showDetails:r}),l=null===(t=D(n))||void 0===t?void 0:t.jurisdictionStatus,u=Te(),d=u.getWip,j=u.updateWip,b=A(n),p=Object(s.useCallback)((function(){return d(n)}),[d,n]),h=Object(s.useCallback)((function(){c((function(e){return!e}))}),[]),O=Object(s.useCallback)((function(e){return j(Object(m.a)(Object(m.a)({},b),e))}),[b,j]);return Object(L.jsxs)("div",{className:o.root,children:[Object(L.jsxs)("div",{className:o.header,children:[Object(L.jsxs)("div",{className:o.headerLeft,children:[Object(L.jsx)("h2",{className:o.title,children:"Jurisdiction details"}),Object(L.jsx)(Yt,{status:l})]}),Object(L.jsx)(Mt,{updatedAt:Date.now(),onUpdate:p})]}),Object(L.jsx)("div",{className:o.detailsToggle,onClick:h,children:r?"Hide details":"Show details"}),Object(L.jsx)("div",{className:o.details,children:Object(L.jsx)(vn,{wipJurisdiction:b,onSubmit:O})}),Object(L.jsx)(Ln,{wipJurisdiction:b}),Object(L.jsx)(zn,{wipJurisdiction:b})]})},Mn=function(){return{validate:Ge.c(),input:{select:!0,options:[{value:"Y",label:"Yes"},{value:"N",label:"No"},{value:"U",label:"Unknown"}]},defaultValue:"U"}},_n={name:{validate:Ge.c().required(),input:{label:"Name"}},address1:{validate:Ge.c(),input:{label:"Address 1"}},address2:{validate:Ge.c(),input:{label:"Address 2"}},address3:{validate:Ge.c(),input:{label:"Address 3"}},city:{validate:Ge.c(),input:{label:"City"}},zip:{validate:Ge.c(),input:{label:"ZIP"}},contactName:{validate:Ge.c(),input:{label:"Contact Name"}},contactPhone:{validate:Ge.c(),input:{label:"Contact Phone"}},contactEmail:{validate:Ge.c().email(),input:{label:"Contact Email"}},isDriveup:Mn(),isDropBox:Mn(),isEarlyDropoffLocation:Mn(),isEarlyVotingLocation:Mn(),isElectionsOffice:Mn(),isHandicapAccessible:Mn(),isOutdoors:Mn(),isPollingLocation:Mn(),isStaffedLocation:Mn(),scheduleType:{validate:Ge.c(),input:{select:!0,options:[{value:"description",label:"Description"},{value:"continuous",label:"Continuous"},{value:"hours",label:"Hours"}]},defaultValue:"description"},scheduleDescription:{validate:Ge.c(),input:{label:"Schedule Description",type:"textarea",multiline:!0,rows:7,variant:"outlined"}},continuousOpenDate:{validate:Ge.c(),input:{label:"Continuous Open Date",type:"date"}},continuousOpenTime:{validate:Ge.c(),input:{label:"Continuous Open Time",type:"time"}},continuousCloseDate:{validate:Ge.c(),input:{label:"Continuous Close Date",type:"date"}},continuousCloseTime:{validate:Ge.c(),input:{label:"Continuous Close Time",type:"time"}}},Vn=Object(x.a)((function(e){return{section:{position:"relative","&:before":{content:'""',position:"absolute",top:12,bottom:12,left:0,width:4,border:"1px ".concat(e.palette.primary.main," solid"),borderRightWidth:0},"&:after":{position:"absolute",left:-32,top:"50%",transform:"translateY(-50%) rotate(-90deg)",fontSize:12}},address:{"&:after":{content:'"address"'}},contact:{"&:after":{content:'"contact"'}}}})),qn=function(e){var t=e.wipLocation,n=e.onSubmit,a=Vn(),i=ct({schema:_n,initialValues:t,onSubmit:n,buttonDefaults:{size:"large"}}),r=i.makeInput,c=i.makeSubmitButton,s=i.makeResetButton,o=i.values;return Object(L.jsx)("form",{children:Object(L.jsxs)(dt.a,{container:!0,spacing:2,children:[Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("name")}),Object(L.jsxs)(dt.a,{container:!0,spacing:0,item:!0,xs:12,className:Object(et.a)(a.section,a.address),children:[Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("address1")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("address2")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("address3")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("city")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("zip")})]}),Object(L.jsxs)(dt.a,{container:!0,spacing:0,item:!0,xs:12,className:Object(et.a)(a.section,a.contact),children:[Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("contactName")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("contactPhone")}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("contactEmail")})]}),Object(L.jsxs)(dt.a,{container:!0,spacing:2,item:!0,xs:12,children:[Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isDriveup")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isDropBox")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isEarlyDropoffLocation")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isEarlyVotingLocation")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isElectionsOffice")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isHandicapAccessible")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isOutdoors")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isPollingLocation")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("isStaffedLocation")})]}),Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("scheduleType")}),function(){switch(o.scheduleType){case"description":return Object(L.jsx)(dt.a,{item:!0,xs:12,children:r("scheduleDescription")});case"continuous":return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("continuousOpenDate")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("continuousOpenTime")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("continuousCloseDate")}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:r("continuousCloseTime")})]});default:return null}}(),Object(L.jsxs)(dt.a,{container:!0,item:!0,xs:12,justify:"space-around",style:{paddingTop:"2em"},children:[s(),c({label:t?"Update location":"Add location",requireDirty:!!t})]})]})})},Gn=Object(x.a)((function(e){return{root:{height:500,border:"1px ".concat(e.palette.primary.main," solid"),borderRadius:"1em",padding:"1em",color:e.palette.primary.dark},title:{color:e.palette.primary.dark,fontSize:20}}})),Hn=function(){var e=Gn();return Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)("h3",{className:e.title,children:"Interview"}),Object(L.jsx)("div",{children:"Read the questions as you complete the location information."})]})},Yn=Object(x.a)((function(e){return{root:{paddingBottom:"6em"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"3em"},title:{color:e.palette.secondary.main,fontWeight:700},backButton:{color:e.palette.link.main,fontSize:12,cursor:"pointer",textDecoration:"underline",display:"inline-block",marginBottom:"3em"},locationHeader:{margin:"1em 0",color:e.palette.primary.dark,fontSize:14},locationName:{fontWeight:700,fontSize:20}}})),Zn=function(e){var t=e.match.params,n=t.jid,a=t.lid,i=Yn(),r=Object(qe.g)(),c=A(n),o=D(n).stateName,l="new"===a,u=l?void 0:c.locations.find((function(e){return e.id===+a})),d=Te(),j=d.getWip,b=d.updateWip,p=Object(s.useCallback)((function(){j(n)}),[n,j]),f=Object(s.useCallback)((function(e){return b(Object(m.a)(Object(m.a)({},c),{},{locations:l?[e].concat(Object(xe.a)(c.locations)):c.locations.map((function(t){return t.id===+a?Object(m.a)(Object(m.a)({},t),e):t}))}))}),[c,l,a,b]);return Object(L.jsxs)("div",{className:i.root,children:[Object(L.jsxs)("div",{className:i.header,children:[Object(L.jsxs)("h2",{className:i.title,children:[l?"Add":"Edit"," location"]}),Object(L.jsx)(Mt,{updatedAt:Date.now(),onUpdate:p})]}),Object(L.jsx)("div",{className:i.backButton,onClick:r.goBack,children:"Back to the jurisdiction"}),Object(L.jsxs)(dt.a,{container:!0,spacing:6,children:[Object(L.jsxs)(dt.a,{item:!0,xs:6,children:[Object(L.jsxs)("div",{className:i.locationHeader,children:[Object(L.jsx)("div",{className:i.locationName,children:l?"New Location":u.name}),Object(L.jsxs)("div",{children:[c.name,", ",o]})]}),Object(L.jsx)(qn,{wipLocation:u,onSubmit:f})]}),Object(L.jsx)(dt.a,{item:!0,xs:6,children:Object(L.jsx)(Hn,{})})]})]})},Kn=function(e){var t=e.match,n=t.params.jid,a=t.path,i=Te().getWip,r=A(n);return Object(s.useEffect)((function(){r||i(n)}),[n,r,i]),r?Object(L.jsxs)(qe.d,{children:[Object(L.jsx)(qe.b,{exact:!0,path:a,component:Un}),Object(L.jsx)(qe.b,{path:"".concat(a,"/locations/:lid"),component:Zn})]}):null},Qn=function(e){var t=e.match.path,n=T(),a=Te().listWips;return Object(s.useEffect)((function(){n||a()}),[n,a]),n?Object(L.jsxs)(qe.d,{children:[Object(L.jsx)(qe.b,{exact:!0,path:t,component:On}),Object(L.jsx)(qe.b,{path:"".concat(t,"/:jid"),component:Kn}),Object(L.jsx)(qe.a,{to:t})]}):null},Xn=function(){return Object(L.jsx)(Jt,{children:Object(L.jsxs)(qe.d,{children:[Object(L.jsx)(qe.b,{path:"/jurisdictions",component:Qn}),Object(L.jsx)(qe.a,{to:"/jurisdictions"})]})})},$n=Object(x.a)((function(e){return{root:{height:150,border:"1px ".concat(e.palette.primary.main," solid"),borderRadius:10,padding:"1em",marginBottom:"3em",display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}})),ea=function(e){e.jurisdictions;var t=$n();We().openModal;return Object(L.jsx)("div",{className:t.root,children:Object(L.jsx)("div",{children:"Stats"})})},ta=Object(x.a)((function(e){return{root:{},header:{marginBottom:"0.5em",borderBottom:"1px #D6D6D6 solid",display:"flex",alignItems:"flex-end"},tabs:{flex:1},searchBox:{width:300}}})),na=[{title:"Not Assigned",filter:function(e){return e.filter((function(e){return 0===e.userJurisdictions.length}))}},{title:"Assigned",filter:function(e){return e.filter((function(e){return e.userJurisdictions.length>0}))}}],aa=[{title:"Jurisdiction",field:"jurisdictionName",sort:!0},{title:"State",field:"stateName",sort:!0},{render:function(e,t){var n=t.id;return Object(L.jsx)(bn,{label:"Select",disabled:!0,to:n})},textAlign:"center"}],ia=function(e){var t=e.jurisdictions,n=ta(),a=Object(s.useState)(na[0]),i=Object(f.a)(a,2),r=i[0],c=i[1],o=Object(s.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1];Object(s.useEffect)((function(){return d("")}),[r]);var j=Object(s.useMemo)((function(){var e;e=r.filter(t);var n=u.trim();return n.length<2?e:e=e.filter((function(e){var t=new RegExp(n,"i");return t.test(e.jurisdictionName)||t.test(e.stateName)}))}),[r,u,t]);return Object(L.jsxs)("div",{className:n.root,children:[Object(L.jsxs)("div",{className:n.header,children:[Object(L.jsx)("div",{className:n.tabs,children:Object(L.jsx)(wn,{tabs:na,activeTab:r,onChange:c,renderTitle:function(e){return e.title}})}),Object(L.jsx)("div",{className:n.searchBox,children:Object(L.jsx)(Gt,{value:u,onChange:d,placeholder:"Filter by jurisdiction or state name"})})]}),Object(L.jsx)(jn,{data:j,columns:aa})]})},ra=Object(x.a)((function(e){return{root:{paddingBottom:"6em"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2.5em",height:"3em"},title:{color:e.palette.secondary.main,fontWeight:700,fontSize:24}}})),ca=function(){var e=ra(),t=Re().getJurisdictions,n=Object(j.c)(S).jurisdictions;Object(s.useEffect)((function(){n||t()}),[n,t]);var a=Object(s.useMemo)((function(){return n?n.map((function(e){return{id:e.id,jurisdictionName:e.name,stateName:e.state.name,jurisdictionStatus:e.jurisdictionStatus,userJurisdictions:e.userJurisdictions}})):null}),[n]);return a?Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsxs)("div",{className:e.header,children:[Object(L.jsx)("h1",{className:e.title,children:"Dashboard"}),Object(L.jsx)(Mt,{updatedAt:Date.now(),onUpdate:t})]}),Object(L.jsx)(ea,{jurisdictions:a}),Object(L.jsx)(ia,{jurisdictions:a})]}):null},sa=n(366),oa=n(371),la=n(372),ua=n(52),da=n(360),ja=n(367),ba=n(315),pa=n(370),ma=n(369),fa=n(380),ha=n(368),Oa=Object(x.a)((function(e){return{cardHeader:{padding:e.spacing(1,2)},list:{minWidth:300,minHeight:500,maxHeight:500,backgroundColor:e.palette.background.paper,overflow:"auto"},button:{margin:e.spacing(.5,0)}}}));function xa(e,t,n){return e.filter((function(e){return!t.some((function(t){return e[n]===t[n]}))}))}function va(e,t,n){return e.filter((function(e){return t.some((function(t){return e[n]===t[n]}))}))}var ga=function(e){var t=e.leftTitle,n=e.rightTitle,a=e.rightItems,i=e.leftItems,r=e.onTransferLeft,c=e.onTransferRight,o=e.schema,l=Oa(),u=Object(s.useState)([]),d=Object(f.a)(u,2),j=d[0],b=d[1],p=function(e){return function(){var t=j.findIndex((function(t){return t[o.value]===e[o.value]})),n=Object(xe.a)(j);-1===t?n.push(e):n.splice(t,1),b(n)}},m=function(e){return va(e,j,o.value).length},h=function(e){return function(){var t,n;m(e)===e.length?b(xa(j,e)):b((t=j,n=e,[].concat(Object(xe.a)(t),Object(xe.a)(xa(n,t)))))}},O=function(e,t,n){return Object(L.jsxs)(sa.a,{children:[Object(L.jsx)(ja.a,{className:l.cardHeader,avatar:Object(L.jsx)(fa.a,{onClick:h(n),checked:m(n)===n.length&&0!==n.length,disabled:0===n.length,inputProps:{"aria-label":"all items selected"}}),title:e,subheader:t}),Object(L.jsx)(ha.a,{}),Object(L.jsxs)(da.a,{className:l.list,dense:!0,component:"div",role:"list",children:[n.map((function(e){var t="transfer-list-all-item-".concat(e[o.primaryText],"-label");return Object(L.jsxs)(ba.a,{role:"listitem",button:!0,onClick:p(e),children:[Object(L.jsx)(ma.a,{children:Object(L.jsx)(fa.a,{checked:-1!==j.findIndex((function(t){return t[o.value]===e[o.value]})),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(L.jsx)(pa.a,{id:t,primary:e[o.primaryText],secondary:e[o.secondaryText]})]},e[o.value]+e[o.primaryText])})),Object(L.jsx)(ba.a,{})]})]})};return Object(L.jsxs)(dt.a,{container:!0,spacing:2,justify:"flex-start",alignItems:"center",className:l.root,children:[Object(L.jsx)(dt.a,{item:!0,xs:5,children:O(t,"Select all",i)}),Object(L.jsx)(dt.a,{item:!0,xs:2,children:Object(L.jsxs)(dt.a,{container:!0,direction:"column",alignItems:"center",children:[Object(L.jsx)($e.a,{variant:"outlined",size:"small",className:l.button,onClick:function(){var e=va(i,j,o.value),t=xa(i,e,o.value);r(t),c(a.concat(e)),b(xa(j,e,o.value))},disabled:0===va(i,j,o.value).length,"aria-label":"move selected right",children:">"}),Object(L.jsx)($e.a,{variant:"outlined",size:"small",className:l.button,onClick:function(){var e=va(a,j,o.value),t=xa(a,e,o.value);c(t),r(e.concat(i)),b(xa(j,e,o.value))},disabled:0===va(a,j,o.value).length,"aria-label":"move selected left",children:"<"})]})}),Object(L.jsx)(dt.a,{item:!0,xs:5,children:O(n,"Select all",a)})]})},ya=Object(x.a)((function(e){return{select:{fontSize:"12px"},menuItem:{fontSize:"11px"}}}));var wa=function(e){var t=e.label,n=e.items,a=e.schema,i=e.onChange,r=(e.disabled,ya()),c=o.a.useState(""),s=Object(f.a)(c,2),l=s[0],u=s[1],d=a.value,j=a.labelText;return n?Object(L.jsx)(Ze.a,{select:!0,className:r.select,id:"simple-select",value:l,onChange:function(e){var t=e.target.value;u(t),i(t)},label:t,fullWidth:!0,children:n&&n.map((function(e,t){return Object(L.jsx)(Ke.a,{dense:!0,className:r.menuItem,value:e[d],children:e[j]},e[j]+t)}))}):null},Ca=Object(x.a)((function(e){return{root:{},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"2.5em",height:"3em"},headerTitle:{color:e.palette.secondary.main,fontWeight:700,fontSize:24},gridContainer:{},gridItem:{},card:{marginTop:"50px",position:"relative"},cardContent:{marginTop:"10px",marginBottom:"10px"},title:{fontWeight:500,fontSize:"18px"},saveButton:{margin:e.spacing(1),width:"125px"},cardActions:{justifyContent:"center"},select:{marginBottom:"100px"}}})),Na=function(e){return function(t,n){return t[e].localeCompare(n[e])}};var Sa=function(){var e=Ca(),t=M(),n=Object(s.useState)(!1),a=Object(f.a)(n,2),i=a[0],r=a[1],c=Object(s.useState)([]),o=Object(f.a)(c,2),l=o[0],u=o[1],d=Object(s.useState)(null),j=Object(f.a)(d,2),b=j[0],p=j[1],h=Object(s.useState)(null),O=Object(f.a)(h,2),x=O[0],v=O[1],g=Object(s.useState)([]),y=Object(f.a)(g,2),w=y[0],C=y[1],N=Object(s.useState)({}),S=Object(f.a)(N,2),k=S[0],I=S[1],T=Object(s.useState)({}),E=Object(f.a)(T,2),A=E[0],D=E[1],R=Object(s.useState)([]),B=Object(f.a)(R,2),P=B[0],J=B[1],W=Object(s.useState)([]),z=Object(f.a)(W,2),F=z[0],U=z[1],_=Object(s.useState)(!1),V=Object(f.a)(_,2),q=V[0],G=V[1];return Object(s.useEffect)((function(){var e=!0;return q||(me.assignment.listAllVolunteers().then((function(t){var n=t.reduce((function(e,t){return t.userJurisdictions=t.userJurisdictions.map((function(e){return e.jurisdiction})),Object(m.a)(Object(m.a)({},e),{},Object(ve.a)({},t.id,t))}),{});e&&C(n)})),me.assignment.listAllJurisdictions().then((function(t){var n={},a={},i={};t.forEach((function(e){var t=e.id,r=e.name,c=e.state,s={id:t,name:r,userJurisdictions:e.userJurisdictions,stateId:c.id,stateAbbrev:c.abbreviation};i[c.id]||(i[c.id]=c),a[e.id]=s;var o=n[c.id]?[].concat(Object(xe.a)(n[c.id]),[s]):[s];n[c.id]=o})),e&&(p(a),v(n),u(i),r(!0))}))),function(){return e=!1}}),[q]),Object(s.useEffect)((function(){if(k&&k.userJurisdictions){var e=k.userJurisdictions.map((function(e){return b[e.id]})).sort(Na("name"));J(e)}return function(){}}),[k,b,w]),Object(s.useEffect)((function(){return A.id&&U(x[A.id]),function(){}}),[A,x,l]),Object(s.useEffect)((function(){k.id&&I(w[k.id]),A.id?D(l[A.id]):U([])}),[w,l]),i?Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsxs)("div",{className:e.header,children:[Object(L.jsx)("h1",{className:e.headerTitle,children:"Assign Jurisdictions"}),Object(L.jsx)(Mt,{updatedAt:Date.now(),onUpdate:function(){return console.log("implement update")}})]}),Object(L.jsxs)(dt.a,{container:!0,className:e.gridContainer,spacing:6,children:[Object(L.jsxs)(dt.a,{item:!0,xs:4,className:e.gridItem,children:[Object(L.jsx)("div",{style:{marginBottom:20},children:Object(L.jsx)(wa,{className:e.select,disabled:!i,label:"Volunteer",items:i&&w&&Object.values(w).sort(Na("email")),schema:{id:"id",value:"id",labelText:"email"},onChange:function(e){I(w[e])}})}),Object(L.jsx)(wa,{className:e.select,disabled:!i,label:"State",items:i&&l&&Object.values(l).sort(Na("name")),schema:{id:"id",value:"id",labelText:"name"},onChange:function(e){D(l[e])}}),Object(L.jsx)(sa.a,{className:e.card,elevation:1,children:Object(L.jsxs)(oa.a,{children:[Object(L.jsx)(ua.a,{className:e.title,id:"CardTitle",align:"center",component:"div",children:"Volunteer notes/preferences:"}),Object(L.jsx)(ua.a,{className:e.cardContent,style:{fontSize:"14px"},id:"cardContent",align:"center",component:"div",children:k&&k.notes?k.notes:"no notes/preferences provided"})]})}),Object(L.jsxs)(sa.a,{className:e.card,elevation:1,children:[Object(L.jsxs)(oa.a,{children:[Object(L.jsx)(ua.a,{className:e.title,id:"CardTitle",align:"center",component:"div",children:"Please confirm:"}),Object(L.jsx)(ua.a,{className:e.cardContent,style:{fontSize:"16px",fontWeight:"bold"},align:"center",id:"cardContent",component:"div",children:P.length||"0"}),Object(L.jsx)(ua.a,{className:e.cardContent,style:{fontSize:"14px"},id:"cardContent",align:"center",component:"div",children:"jurisdictions will be assigned to:"}),Object(L.jsx)(ua.a,{className:e.cardContent,style:{fontSize:"14px",fontWeight:"bold"},align:"center",id:"cardContent",component:"div",children:k.email||"no volunteer selected"})]}),Object(L.jsx)(la.a,{className:e.cardActions,children:Object(L.jsx)($e.a,{className:e.saveButton,variant:"contained",color:"primary",onClick:function(){if(G(!0),P.length||F.length){var e=k.id,n=k.userJurisdictions.map((function(e){return e.id})),a={userId:e,jurisdictionIds:P.map((function(e){return e.id})).filter((function(e){return!n.includes(e)})),removedJurisdictionIds:F.map((function(e){return e.id})).filter((function(e){return n.includes(e)}))};me.assignment.assignJurisdictions(a).then((function(e){var n=e.results,a="\n            Success:\n            Created ".concat(n.created.length," jurisdiction assignments.\n            Removed ").concat(n.removed," jurisdiction assignments.");t({severity:"success",autoHideDuration:7e3,message:a}),G(!1)}))}},disabled:!(P.length||F.length)||q,children:q?Object(L.jsx)(tt.a,{size:20,variant:"indeterminate",color:"primary"}):"Save"})})]})]}),Object(L.jsx)(dt.a,{item:!0,xs:8,children:Object(L.jsx)(ga,{leftTitle:"Unassigned Jurisdictions",rightTitle:"Assign to Volunteer",leftItems:P.length?Object.values(F).filter((function(e){return!P.map((function(e){return e.id})).includes(e.id)})).sort(Na("name")):Object.values(F).sort(Na("name")),rightItems:Object.values(P).sort(Na("name")),onTransferLeft:function(e){U(e)},onTransferRight:function(e){J(e)},schema:{value:"id",primaryText:"name",secondaryText:"stateAbbrev"}})})]})]}):null},ka=function(){return Object(L.jsx)(Jt,{children:Object(L.jsxs)(qe.d,{children:[Object(L.jsx)(qe.b,{exact:!0,path:"/dashboard",component:ca}),Object(L.jsx)(qe.b,{path:"/assign",component:Sa}),Object(L.jsx)(qe.b,{path:"/jurisdictions",component:Qn}),Object(L.jsx)(qe.a,{to:"/dashboard"})]})})},Ia=function(){var e=k(),t=e.authChecked,n=e.user,a=he().getUser;if(Object(s.useEffect)((function(){t||a()}),[t,a]),!t)return null;switch(null===n||void 0===n?void 0:n.role){case"volunteer":return Object(L.jsx)(Xn,{});case"admin":return Object(L.jsx)(ka,{});default:return Object(L.jsx)(Lt,{})}};u.a.render(Object(L.jsx)(j.a,{store:Me,children:Object(L.jsxs)(b.a,{theme:Ve,children:[Object(L.jsx)(p.a,{}),Object(L.jsx)(U,{children:Object(L.jsx)(d.a,{children:Object(L.jsx)(Ia,{})})})]})}),document.getElementById("root"))}},[[312,1,2]]]);
//# sourceMappingURL=main.e8bc51f9.chunk.js.map